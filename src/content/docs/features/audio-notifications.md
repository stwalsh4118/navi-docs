---
title: Audio Notifications
sidebar:
  order: 12
---

<!-- auto-generated by sync-docs -->

## Overview

Audio notifications play sound files and announce session names via text-to-speech when session statuses change. This lets you monitor your Claude sessions hands-free — hear when a session needs permission, finishes work, or hits an error without watching the TUI.

## Quick Start

1. Create `~/.config/navi/sounds.yaml`:

```yaml
enabled: true

triggers:
  waiting: true
  permission: true
  done: true
  error: true

files:
  waiting: ~/sounds/waiting.wav
  permission: ~/sounds/permission.mp3
  done: ~/sounds/done.ogg
  error: ~/sounds/error.wav

tts:
  enabled: true
```

2. Ensure you have a system audio player installed (`paplay`, `aplay`, `mpv`, or `ffplay` on Linux; `afplay` on macOS)

3. Notifications fire automatically when session statuses change.

## How It Works

The TUI polls sessions every 500ms. When a session's status changes, the audio system:

1. Checks if notifications are enabled and the status has a trigger
2. Checks per-session cooldown (default 5 seconds)
3. Plays the mapped sound file (if configured for that status)
4. Speaks a TTS announcement after a 150ms delay (if TTS enabled)

All playback is non-blocking — audio runs in background goroutines and never stalls the TUI. The first poll after startup is silent to avoid a burst of notifications.

## Configuration

Configuration lives at `~/.config/navi/sounds.yaml`. If the file is missing, audio is disabled by default.

```yaml
enabled: true                    # Master toggle

triggers:                        # Per-status enable/disable
  waiting: true
  permission: true
  working: false
  idle: false
  stopped: false
  done: true
  error: true

files:                           # Status → sound file path
  waiting: ~/sounds/waiting.wav
  permission: ~/sounds/permission.mp3
  done: ~/sounds/done.ogg
  error: ~/sounds/error.wav

tts:
  enabled: true                  # Text-to-speech announcements
  template: "{session} — {status}"  # Announcement format

cooldown_seconds: 5              # Per-session cooldown interval
player: auto                     # Audio player: auto, paplay, afplay, aplay, mpv, ffplay
tts_engine: auto                 # TTS engine: auto, say, espeak-ng, espeak, spd-say
```

### Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `enabled` | bool | `false` | Master toggle for all audio |
| `triggers.<status>` | bool | varies | Whether to notify on this status |
| `files.<status>` | string | — | Path to sound file (supports `~` expansion) |
| `tts.enabled` | bool | `true` | Enable text-to-speech announcements |
| `tts.template` | string | `"{session} — {status}"` | TTS announcement template |
| `cooldown_seconds` | int | `5` | Minimum seconds between notifications per session |
| `player` | string | `"auto"` | Audio player binary or `"auto"` for detection |
| `tts_engine` | string | `"auto"` | TTS engine binary or `"auto"` for detection |

### Default Triggers

| Status | Default |
|--------|---------|
| `waiting` | enabled |
| `permission` | enabled |
| `working` | disabled |
| `idle` | disabled |
| `stopped` | disabled |
| `done` | enabled |
| `error` | enabled |

## Audio Player Detection

When `player: auto`, navi searches for available backends:

| Platform | Detection Order |
|----------|----------------|
| **macOS** | `afplay` (built-in) |
| **Linux** | `paplay` (PulseAudio) → `aplay` (ALSA) → `ffplay` (FFmpeg) → `mpv` |

You can override detection by setting `player` to a specific binary name.

## TTS Engine Detection

When `tts_engine: auto`, navi searches for available backends:

| Platform | Detection Order |
|----------|----------------|
| **macOS** | `say` (built-in) |
| **Linux** | `espeak-ng` → `espeak` → `spd-say` (speech-dispatcher) |

The TTS template supports `{session}` and `{status}` placeholders, replaced with the session name and new status at announcement time.

## Cooldown

Per-session cooldowns prevent rapid-fire notifications. If a session changes status multiple times within the cooldown window (default 5 seconds), only the first transition triggers audio. Each session has its own independent cooldown timer.

## Graceful Degradation

- Missing config file: audio disabled, no errors
- No audio player found: notifications silently skipped
- No TTS engine found: sound plays but no speech
- Missing sound file for a status: sound skipped, TTS still plays
- Malformed YAML: error returned, audio disabled

## Related Features

- [Session Monitoring](/features/session-monitoring/) — Status updates that trigger notifications
- [Background Monitor](/features/background-monitor/) — Audio notifications continue while attached to tmux
